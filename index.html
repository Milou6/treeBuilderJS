<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeBuilderJS</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.3.1/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
    <!-- <script src="https://raw.githubusercontent.com/lyzerk/fabric-history/master/src/index.js"></script> -->
    <!-- <script src="./dependencies/fabric-history/index.js" type="module"></script> -->
    <link href="css/style.css" rel="stylesheet">
</head>


<body>

    <script>
        function undo() {
            canvas.undo();
        }
        function redo() {
            canvas.redo();
        }
    </script>

    <!-- Toolbar for different kinds of nodes -->
    <div id="main-toolbar">
        <button id="binaryNode" class="btn active" onclick="setSelectedButton(this)">
            <img src="images/branch_act.png" alt="binaryBranch">
        </button>

        <button id="singleNode" class="btn" onclick="setSelectedButton(this)">
            <img src="images/node_act.png" alt="singleBranch">
        </button>

        <button id="ternaryNode" class="btn" onclick="setSelectedButton(this)">
            <img src="images/ternary.png" alt="ternaryBranch">
        </button>

        <button onclick="testHistory()">Undo</button>
        <button onclick="redo()">Redo</button>
    </div>

    <script>
        $(document).ready(function () {
            // Set 'active' color to selected button
            // $('button').on('click', function () {
            //     $('button').removeClass('active');
            //     $(this).addClass('active');
            // });

            // scroll the canvas container to first node
            // $(".container").scrollTop(2000);
            // $(".container").scrollLeft(2000);
            $(".container").scrollTop(1000);
            $(".container").scrollLeft(1000);

            document.addEventListener('keyup', (event) => {
                if (['1', '2', '3'].includes(event.key)) {
                    // console.log(event.key);
                    $(`.btn`).removeClass('active');
                    $(`.btn:nth-child(${event.key}`).addClass('active');
                    // console.log($(`.btn:nth-child(${event.key}`));
                    setSelectedButton($(`.btn:nth-child(${event.key}`)[0]);
                }
            });

        });
    </script>



    <a download="canvas.svg" id="downloadlink">Download</a>

    <!-- The canvas running the tree-building javascript -->
    <div class="container">
        <canvas id="treeCanvas" width="3000" height="3000"></canvas>
    </div>
    <!-- <h2 id="coords"></h2> -->

    <style type="text/css">
        canvas {
            border: 1px solid black;
        }
    </style>


    <!-- Loading all canvas javascript -->
    <script src="js/utils/methods.js"></script>
    <script src="js/nodeText.js"></script>
    <script src="js/hoverCircle.js"></script>
    <script src="js/treeNode.js"></script>
    <script src="canvas.js"></script>


</body>

</html>